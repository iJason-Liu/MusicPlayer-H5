# ğŸ“ é¡¹ç›®ç»“æ„è¯´æ˜

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜é¡¹ç›®çš„ç›®å½•ç»“æ„å’Œæ–‡ä»¶ç»„ç»‡ã€‚

## ğŸ“‚ æ•´ä½“ç»“æ„

```text
music-player/
â”œâ”€â”€ backend/                    # åç«¯ä»£ç ï¼ˆThinkPHP + EasyAdminï¼‰
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ admin/             # åå°ç®¡ç†æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ controller/    # æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ music/     # éŸ³ä¹ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Music.php
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Dashboard.php
â”‚   â”‚   â”‚   â”œâ”€â”€ model/         # æ¨¡å‹
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ music/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ Music.php
â”‚   â”‚   â”‚   â””â”€â”€ view/          # è§†å›¾
â”‚   â”‚   â”‚       â”œâ”€â”€ music/
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ music/
â”‚   â”‚   â”‚       â”‚       â””â”€â”€ index.html
â”‚   â”‚   â”‚       â””â”€â”€ dashboard/
â”‚   â”‚   â”‚           â””â”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ api/               # API æ¥å£æ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ controller/
â”‚   â”‚   â”‚       â””â”€â”€ Music.php
â”‚   â”‚   â”œâ”€â”€ common/            # å…¬å…±æ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ helper.php     # è¾…åŠ©å‡½æ•°
â”‚   â”‚   â””â”€â”€ http/              # HTTP ä¸­é—´ä»¶
â”‚   â”‚       â””â”€â”€ middleware/
â”‚   â”‚           â””â”€â”€ AllowCrossDomain.php
â”‚   â”œâ”€â”€ database/              # æ•°æ®åº“
â”‚   â”‚   â””â”€â”€ migrations/        # è¿ç§»æ–‡ä»¶
â”‚   â”‚       â””â”€â”€ create_music_table.php
â”‚   â””â”€â”€ route/                 # è·¯ç”±
â”‚       â””â”€â”€ api.php
â”‚
â”œâ”€â”€ frontend/                   # å‰ç«¯ä»£ç ï¼ˆVue 3ï¼‰
â”‚   â”œâ”€â”€ public/                # é™æ€èµ„æº
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/               # API æ¥å£
â”‚   â”‚   â”‚   â””â”€â”€ music.js
â”‚   â”‚   â”œâ”€â”€ components/        # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ MiniPlayer.vue # è¿·ä½ æ’­æ”¾å™¨
â”‚   â”‚   â”‚   â””â”€â”€ MusicItem.vue  # éŸ³ä¹åˆ—è¡¨é¡¹
â”‚   â”‚   â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ stores/            # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ music.js
â”‚   â”‚   â”œâ”€â”€ styles/            # å…¨å±€æ ·å¼
â”‚   â”‚   â”‚   â””â”€â”€ index.scss
â”‚   â”‚   â”œâ”€â”€ views/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.vue       # éŸ³ä¹åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ Player.vue     # æ’­æ”¾å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ Mine.vue       # æˆ‘çš„
â”‚   â”‚   â”‚   â”œâ”€â”€ Playlist.vue   # æ’­æ”¾åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ History.vue    # æ’­æ”¾å†å²
â”‚   â”‚   â”‚   â”œâ”€â”€ Star.vue       # æˆ‘çš„å–œæ¬¢
â”‚   â”‚   â”‚   â””â”€â”€ Login.vue      # ç™»å½•
â”‚   â”‚   â”œâ”€â”€ App.vue            # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.js            # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html             # HTML æ¨¡æ¿
â”‚   â”œâ”€â”€ vite.config.js         # Vite é…ç½®
â”‚   â”œâ”€â”€ package.json           # ä¾èµ–é…ç½®
â”‚   â””â”€â”€ .gitignore
â”‚
â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ DEPLOY.md                   # éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ PROJECT_STRUCTURE.md        # é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ start.sh                    # å¿«é€Ÿå¯åŠ¨è„šæœ¬
â””â”€â”€ build.sh                    # æ„å»ºè„šæœ¬
```

## ğŸ” æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### åç«¯æ ¸å¿ƒæ–‡ä»¶

#### 1. `backend/app/admin/controller/music/Music.php`

éŸ³ä¹ç®¡ç†æ§åˆ¶å™¨ï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š

- `index()` - éŸ³ä¹åˆ—è¡¨å±•ç¤º
- `add()` - æ·»åŠ éŸ³ä¹
- `edit()` - ç¼–è¾‘éŸ³ä¹ä¿¡æ¯
- `del()` - åˆ é™¤éŸ³ä¹
- `scan()` - æ‰«æéŸ³ä¹ç›®å½•
- `match()` - æ‰¹é‡åŒ¹é…éŸ³ä¹ä¿¡æ¯
- `upload()` - ä¸Šä¼ éŸ³ä¹æ–‡ä»¶
- `statistics()` - ç»Ÿè®¡æ•°æ®

#### 2. `backend/app/admin/model/music/Music.php`

éŸ³ä¹æ•°æ®æ¨¡å‹ï¼Œå®šä¹‰ï¼š

- æ•°æ®è¡¨æ˜ å°„
- å­—æ®µè·å–å™¨ï¼ˆæ ¼å¼åŒ–ï¼‰
- çŠ¶æ€åˆ—è¡¨
- è‡ªåŠ¨æ—¶é—´æˆ³

#### 3. `backend/app/api/controller/Music.php`

å‰ç«¯ API æ¥å£ï¼Œæä¾›ï¼š

- `index()` - è·å–éŸ³ä¹åˆ—è¡¨
- `search()` - æœç´¢éŸ³ä¹
- `detail()` - è·å–éŸ³ä¹è¯¦æƒ…

#### 4. `backend/database/migrations/create_music_table.php`

æ•°æ®åº“è¿ç§»æ–‡ä»¶ï¼Œå®šä¹‰éŸ³ä¹è¡¨ç»“æ„ã€‚

### å‰ç«¯æ ¸å¿ƒæ–‡ä»¶

#### 1. `frontend/src/stores/music.js`

Pinia çŠ¶æ€ç®¡ç†ï¼Œç®¡ç†ï¼š

- éŸ³ä¹åˆ—è¡¨
- å½“å‰æ’­æ”¾éŸ³ä¹
- æ’­æ”¾çŠ¶æ€
- æ’­æ”¾åˆ—è¡¨
- æ’­æ”¾å†å²
- æ”¶è—åˆ—è¡¨
- æ’­æ”¾æ¨¡å¼

#### 2. `frontend/src/router/index.js`

Vue Router è·¯ç”±é…ç½®ï¼Œå®šä¹‰æ‰€æœ‰é¡µé¢è·¯ç”±ã€‚

#### 3. `frontend/src/views/Player.vue`

æ’­æ”¾å™¨é¡µé¢ï¼Œæ ¸å¿ƒåŠŸèƒ½ï¼š

- å°é¢æ—‹è½¬åŠ¨ç”»
- æ­Œè¯æ˜¾ç¤º
- è¿›åº¦æ¡æ§åˆ¶
- æ’­æ”¾æ§åˆ¶æŒ‰é’®
- æ’­æ”¾æ¨¡å¼åˆ‡æ¢

#### 4. `frontend/src/components/MiniPlayer.vue`

è¿·ä½ æ’­æ”¾å™¨ç»„ä»¶ï¼Œæ˜¾ç¤ºåœ¨åº•éƒ¨å¯¼èˆªä¸Šæ–¹ã€‚

#### 5. `frontend/src/App.vue`

æ ¹ç»„ä»¶ï¼ŒåŒ…å«ï¼š

- è·¯ç”±è§†å›¾
- åº•éƒ¨å¯¼èˆªï¼ˆæ¶²æ€ç»ç’ƒæ•ˆæœï¼‰
- è¿·ä½ æ’­æ”¾å™¨

## ğŸ¨ æ ·å¼ç»„ç»‡

### å…¨å±€æ ·å¼

- `frontend/src/styles/index.scss` - å…¨å±€æ ·å¼ã€é‡ç½®æ ·å¼ã€å…¬å…±ç±»

### ç»„ä»¶æ ·å¼

æ¯ä¸ª Vue ç»„ä»¶ä½¿ç”¨ `<style lang="scss" scoped>` å®šä¹‰ç»„ä»¶ç§æœ‰æ ·å¼ã€‚

### ä¸»é¢˜è‰²

- ä¸»æ¸å˜ï¼š`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`
- ç»ç’ƒæ•ˆæœï¼š`backdrop-filter: blur(30px) saturate(180%)`
- ç™½è‰²é€æ˜ï¼š`rgba(255, 255, 255, 0.1)` ç³»åˆ—

## ğŸ”§ é…ç½®æ–‡ä»¶

### å‰ç«¯é…ç½®

- `vite.config.js` - Vite æ„å»ºé…ç½®ã€å¼€å‘æœåŠ¡å™¨ã€ä»£ç†è®¾ç½®
- `package.json` - ä¾èµ–ç®¡ç†ã€è„šæœ¬å‘½ä»¤
- `.gitignore` - Git å¿½ç•¥æ–‡ä»¶

### åç«¯é…ç½®

- `.env` - ç¯å¢ƒé…ç½®ï¼ˆæ•°æ®åº“ã€ç¼“å­˜ç­‰ï¼‰
- `route/api.php` - API è·¯ç”±é…ç½®

## ğŸ“¦ ä¾èµ–è¯´æ˜

### å‰ç«¯ä¾èµ–

**æ ¸å¿ƒä¾èµ–ï¼š**

- `vue` - Vue 3 æ¡†æ¶
- `vue-router` - è·¯ç”±ç®¡ç†
- `pinia` - çŠ¶æ€ç®¡ç†
- `axios` - HTTP è¯·æ±‚
- `vant` - UI ç»„ä»¶åº“

**å¼€å‘ä¾èµ–ï¼š**

- `vite` - æ„å»ºå·¥å…·
- `@vitejs/plugin-vue` - Vue æ’ä»¶
- `sass` - CSS é¢„å¤„ç†å™¨

### åç«¯ä¾èµ–

- `topthink/framework` - ThinkPHP æ¡†æ¶
- `topthink/think-orm` - ORM
- `topthink/think-cache` - ç¼“å­˜
- `topthink/think-filesystem` - æ–‡ä»¶ç³»ç»Ÿ

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### music è¡¨

| å­—æ®µ        | ç±»å‹         | è¯´æ˜                   |
| ----------- | ------------ | ---------------------- |
| id          | int          | ä¸»é”®                   |
| name        | varchar(255) | æ­Œæ›²åç§°               |
| artist      | varchar(255) | æ­Œæ‰‹                   |
| album       | varchar(255) | ä¸“è¾‘                   |
| cover       | varchar(500) | å°é¢å›¾ URL             |
| lyric       | text         | æ­Œè¯ï¼ˆLRC æ ¼å¼ï¼‰       |
| duration    | int          | æ—¶é•¿ï¼ˆç§’ï¼‰             |
| file_path   | varchar(500) | æ–‡ä»¶ç›¸å¯¹è·¯å¾„           |
| file_size   | bigint       | æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰       |
| status      | tinyint      | çŠ¶æ€ï¼ˆ0=ç¦ç”¨ï¼Œ1=æ­£å¸¸ï¼‰ |
| create_time | int          | åˆ›å»ºæ—¶é—´               |
| update_time | int          | æ›´æ–°æ—¶é—´               |

**ç´¢å¼•ï¼š**

- PRIMARY KEY (`id`)
- KEY `idx_name` (`name`)
- KEY `idx_artist` (`artist`)
- KEY `idx_status` (`status`)

## ğŸ”„ æ•°æ®æµ

### æ’­æ”¾æµç¨‹

```text
1. ç”¨æˆ·ç‚¹å‡»æ­Œæ›²
   â†“
2. MusicItem è§¦å‘ playMusic
   â†“
3. musicStore.playMusic() æ›´æ–°çŠ¶æ€
   â†“
4. Audio å¯¹è±¡åŠ è½½éŸ³ä¹ URL
   â†“
5. æ’­æ”¾å™¨é¡µé¢æ˜¾ç¤ºä¿¡æ¯
   â†“
6. MiniPlayer æ˜¾ç¤ºå½“å‰æ’­æ”¾
```

### æ•°æ®åŒæ­¥

```text
1. åç«¯æ‰«æéŸ³ä¹æ–‡ä»¶
   â†“
2. ä¿å­˜åˆ°æ•°æ®åº“
   â†“
3. å‰ç«¯è¯·æ±‚ API
   â†“
4. è¿”å›éŸ³ä¹åˆ—è¡¨
   â†“
5. å­˜å‚¨åˆ° Pinia Store
   â†“
6. ç»„ä»¶å“åº”å¼æ›´æ–°
```

## ğŸ“ å¼€å‘è§„èŒƒ

### å‘½åè§„èŒƒ

- **ç»„ä»¶å**ï¼šPascalCaseï¼ˆå¦‚ `MusicItem.vue`ï¼‰
- **æ–‡ä»¶å**ï¼škebab-case æˆ– PascalCase
- **å˜é‡å**ï¼šcamelCase
- **å¸¸é‡å**ï¼šUPPER_SNAKE_CASE
- **CSS ç±»å**ï¼škebab-case

### ä»£ç ç»„ç»‡

- æ¯ä¸ªåŠŸèƒ½æ¨¡å—ç‹¬ç«‹ç›®å½•
- ç»„ä»¶æŒ‰åŠŸèƒ½åˆ†ç±»
- å…¬å…±ä»£ç æå–å¤ç”¨
- ä¿æŒæ–‡ä»¶ç®€æ´ï¼ˆ< 300 è¡Œï¼‰

### Git æäº¤è§„èŒƒ

```text
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤ bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„
perf: æ€§èƒ½ä¼˜åŒ–
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

## ğŸš€ æ‰©å±•å»ºè®®

### åŠŸèƒ½æ‰©å±•

- [ ] ç”¨æˆ·ç³»ç»Ÿï¼ˆç™»å½•ã€æ³¨å†Œï¼‰
- [ ] è¯„è®ºåŠŸèƒ½
- [ ] åˆ†äº«åŠŸèƒ½
- [ ] æ­Œå•ç®¡ç†
- [ ] éŸ³ä¹æ¨è
- [ ] åœ¨çº¿æœç´¢
- [ ] éŸ³é¢‘å¯è§†åŒ–
- [ ] PWA æ”¯æŒ

### æŠ€æœ¯ä¼˜åŒ–

- [ ] æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰
- [ ] å›¾ç‰‡æ‡’åŠ è½½
- [ ] è™šæ‹Ÿæ»šåŠ¨
- [ ] CDN åŠ é€Ÿ
- [ ] Redis ç¼“å­˜
- [ ] æ¶ˆæ¯é˜Ÿåˆ—
- [ ] å¾®æœåŠ¡æ¶æ„

---

**æŒç»­æ›´æ–°ä¸­...** ğŸ“
