import{_,p as y,r as d,c as p,b as e,q as b,a0 as v,a1 as c,K as f,t as k,s as w,v as S,a2 as x,h as g}from"./index-CIrrklg4.js";import{s as n}from"./function-call-9VrdCN6p.js";const I={class:"login-page"},V={class:"login-container"},D={class:"form"},K={class:"input-group"},L={class:"input-group"},U=["disabled"],h={key:0,class:"dev-mode"},B={__name:"Login",setup(E){const m=S();x();const r=y(),a=d(""),l=d(""),o=d(!1),i=async()=>{if(!a.value||!l.value){n("è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ");return}o.value=!0;try{const t=await r.loginUser(a.value,l.value);t.code===1?(n(t.msg||"ç™»å½•æˆåŠŸ"),localStorage.setItem("token",t.data.token),localStorage.setItem("userInfo",JSON.stringify(t.data.user)),r.isLoggedIn=!0,m.push("/home"),o.value=!1):(n(t.msg||"ç™»å½•å¤±è´¥"),o.value=!1)}catch(t){console.error("ç™»å½•å¤±è´¥:",t),n(t.message||"ç™»å½•å¤±è´¥"),o.value=!1}};return(t,s)=>(g(),p("div",I,[e("div",V,[s[5]||(s[5]=e("div",{class:"logo"},[e("i",{class:"fas fa-music"})],-1)),s[6]||(s[6]=e("h1",{class:"title"},"å°æ–°çš„éŸ³ä¹åº“",-1)),s[7]||(s[7]=e("p",{class:"subtitle"},"äº«å—éŸ³ä¹ï¼Œäº«å—ç”Ÿæ´»",-1)),e("div",D,[e("div",K,[s[2]||(s[2]=e("i",{class:"fas fa-user"},null,-1)),v(e("input",{type:"text",placeholder:"ç”¨æˆ·å","onUpdate:modelValue":s[0]||(s[0]=u=>a.value=u),onKeyup:f(i,["enter"])},null,544),[[c,a.value]])]),e("div",L,[s[3]||(s[3]=e("i",{class:"fas fa-lock"},null,-1)),v(e("input",{type:"password",placeholder:"å¯†ç ","onUpdate:modelValue":s[1]||(s[1]=u=>l.value=u),onKeyup:f(i,["enter"])},null,544),[[c,l.value]])]),e("button",{class:"login-btn",onClick:i,disabled:o.value},k(o.value?"ç™»å½•ä¸­...":"ç™»å½•"),9,U),w(r).DEV_MODE?(g(),p("div",h,[...s[4]||(s[4]=[e("p",{class:"dev-tip"},"ğŸ”§ å¼€å‘æ¨¡å¼ï¼šå¯ç›´æ¥è®¿é—®é¡µé¢",-1)])])):b("",!0)])])]))}},M=_(B,[["__scopeId","data-v-120e859b"]]);export{M as default};
