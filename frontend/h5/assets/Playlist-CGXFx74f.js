import{_ as b,u as R,c as p,r as S,D as B,a as o,b as e,d as _,F as M,j as T,s as d,n as w,t as A,i as n,x as E,v as y,q as F,E as $}from"./index-BgLcfbKB.js";import{a as j}from"./function-call-DVx9XO6Q.js";const x={class:"playlist-page"},D={class:"header"},I={key:1,class:"placeholder"},N={key:0,class:"empty"},q=["onClick"],L={class:"index"},O=["src"],Q={class:"info"},V={class:"name"},z={class:"artist"},J=["onClick"],G={name:"Playlist"},H=Object.assign(G,{setup(K){const m=A("imgPath"),l=R(),r=p(()=>l.playlist),v=p(()=>l.currentMusic),c=S(null),h=(a,t)=>{l.playMusic(a,t)},g=a=>{l.removeFromPlaylist(a),d("已移除")},k=()=>{j({title:"清空播放列表",message:"确定要清空播放列表吗？"}).then(()=>{l.setPlaylist([]),d("已清空")}).catch(()=>{})},P=async()=>{try{const a=await $();a.data&&Array.isArray(a.data)&&l.setPlaylist(a.data)}catch(a){console.error("加载播放队列失败:",a);const t=localStorage.getItem("playlist");if(t)try{l.setPlaylist(JSON.parse(t))}catch(s){console.error("解析播放列表失败:",s)}}},C=()=>{if(!v.value){d("当前没有播放歌曲");return}w(()=>{const a=document.querySelectorAll(".playlist-item");let t=null;if(a.forEach(s=>{s.classList.contains("active")&&(t=s)}),t&&c.value){const s=c.value.getBoundingClientRect(),i=t.getBoundingClientRect(),u=c.value.scrollTop,f=i.top-s.top+u-100;c.value.scrollTo({top:f,behavior:"smooth"}),d("已定位到当前播放")}})};return B(()=>{P()}),(a,t)=>(n(),o("div",x,[e("div",D,[e("i",{class:"fas fa-chevron-left back-btn",onClick:t[0]||(t[0]=s=>a.$router.back())}),t[1]||(t[1]=e("h1",{class:"title"},"播放列表",-1)),r.value.length>0?(n(),o("i",{key:0,class:"fas fa-trash clear-btn",onClick:k})):(n(),o("div",I))]),e("div",{class:"content",ref_key:"contentRef",ref:c},[r.value.length===0?(n(),o("div",N,[...t[2]||(t[2]=[e("i",{class:"fas fa-list-ul"},null,-1),e("p",null,"播放列表为空",-1)])])):_("",!0),(n(!0),o(M,null,T(r.value,(s,i)=>{var u;return n(),o("div",{key:s.id,class:E(["playlist-item",{active:((u=v.value)==null?void 0:u.id)===s.id}])},[e("div",{class:"left",onClick:f=>h(s,i)},[e("div",L,y(i+1),1),e("img",{src:F(m)+s.cover,class:"cover"},null,8,O),e("div",Q,[e("div",V,y(s.name),1),e("div",z,y(s.artist),1)])],8,q),e("i",{class:"fas fa-times remove-btn",onClick:f=>g(i)},null,8,J)],2)}),128))],512),v.value&&r.value.length>0?(n(),o("div",{key:0,class:"locate-btn",onClick:C},[...t[3]||(t[3]=[e("i",{class:"fas fa-location-arrow"},null,-1)])])):_("",!0)]))}}),X=b(H,[["__scopeId","data-v-fc42036f"]]);export{X as default};
