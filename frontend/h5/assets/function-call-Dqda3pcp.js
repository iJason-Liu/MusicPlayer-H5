import{x as I,V as g,U as h,T as p,a3 as B,z as T,j as v,o as z,a4 as M,b as l,M as b,N,Q as j,a5 as L,a6 as U,a7 as V,a8 as A,J as E,G as q,C as k,Z as D,a9 as G,r as H,aa as J}from"./index-DLFWzj8n.js";let f=0;function Q(e){e?(f||document.body.classList.add("van-toast--unclickable"),f++):f&&(f--,f||document.body.classList.remove("van-toast--unclickable"))}const[Z,c]=T("toast"),_=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],F={icon:String,show:Boolean,type:p("text"),overlay:Boolean,message:g,iconSize:g,duration:B(2e3),position:p("middle"),teleport:[String,Object],wordBreak:String,className:h,iconPrefix:String,transition:p("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:h,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:g};var K=I({name:Z,props:F,emits:["update:show"],setup(e,{emit:n,slots:t}){let i,o=!1;const r=()=>{const a=e.show&&e.forbidClick;o!==a&&(o=a,Q(o))},u=a=>n("update:show",a),y=()=>{e.closeOnClick&&u(!1)},d=()=>clearTimeout(i),O=()=>{const{icon:a,type:s,iconSize:C,iconPrefix:x,loadingType:P}=e;if(a||s==="success"||s==="fail")return l(L,{name:a||s,size:C,class:c("icon"),classPrefix:x},null);if(s==="loading")return l(U,{class:c("loading"),size:C,type:P},null)},S=()=>{const{type:a,message:s}=e;if(t.message)return l("div",{class:c("text")},[t.message()]);if(V(s)&&s!=="")return a==="html"?l("div",{key:0,class:c("text"),innerHTML:String(s)},null):l("div",{class:c("text")},[s])};return v(()=>[e.show,e.forbidClick],r),v(()=>[e.show,e.type,e.message,e.duration],()=>{d(),e.show&&e.duration>0&&(i=setTimeout(()=>{u(!1)},e.duration))}),z(r),M(r),()=>l(j,b({class:[c([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:y,onClosed:d,"onUpdate:show":u},N(e,_)),{default:()=>[O(),S()]})}});function R(){const e=E({show:!1}),n=o=>{e.show=o},t=o=>{k(e,o,{transitionAppear:!0}),n(!0)},i=()=>n(!1);return q({open:t,close:i,toggle:n}),{open:t,close:i,state:e,toggle:n}}function W(e){const n=A(e),t=document.createElement("div");return document.body.appendChild(t),{instance:n.mount(t),unmount(){n.unmount(),document.body.removeChild(t)}}}const X={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let m=[],Y=!1,w=k({},X);const $=new Map;function ee(e){return G(e)?e:{message:e}}function ne(){const{instance:e}=W({setup(){const n=H(""),{open:t,state:i,close:o,toggle:r}=R(),u=()=>{},y=()=>l(K,b(i,{onClosed:u,"onUpdate:show":r}),null);return v(n,d=>{i.message=d}),J().render=y,{open:t,close:o,message:n}}});return e}function te(){if(!m.length||Y){const e=ne();m.push(e)}return m[m.length-1]}function se(e={}){if(!D)return{};const n=te(),t=ee(e);return n.open(k({},w,$.get(t.type||w.type),t)),n}export{W as m,se as s,R as u};
