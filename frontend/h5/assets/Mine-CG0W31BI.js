import{m as C,_ as L,u as M,p as S,j as l,c as u,b as s,q as c,s as i,t as n,v as D,h as d}from"./index-CIrrklg4.js";import{s as b,a as w}from"./function-call-DasKdd46.js";import{s as B}from"./function-call-9VrdCN6p.js";C(b);const H={class:"mine-page"},N={class:"header"},V={class:"user-info"},j={class:"avatar"},q={key:0,class:"fas fa-user"},E=["src"],R={class:"info"},T={class:"name"},U={class:"stats"},x={class:"stat-item"},z={class:"value"},A={class:"stat-item"},F={class:"value"},G={class:"menu-list"},J={class:"right"},K={class:"count"},O={class:"right"},P={class:"count"},Q={class:"right"},W={class:"count"},X={__name:"Mine",setup(Y){const h=D(),r=M(),o=S(),g=l(()=>r.playHistory),_=l(()=>r.playlist),y=l(()=>r.favorites),v=l(()=>r.musicList),k=l(()=>v.value.reduce((a,t)=>a+(t.duration||0),0)),I=a=>{const t=Math.floor(a/3600),e=Math.floor(a%3600/60);return t>0?`${t}小时${e}分钟`:`${e}分钟`},$=()=>{w({title:"退出登录",message:"确定要退出登录吗？"}).then(()=>{o.logout(),B("已退出登录"),h.replace("/login")}).catch(()=>{})};return(a,t)=>{var e,f,m;return d(),u("div",H,[s("div",N,[s("div",V,[s("div",j,[!i(o).isLoggedIn||((e=i(o).userInfo)==null?void 0:e.avatar)==""?(d(),u("i",q)):c("",!0),i(o).isLoggedIn&&((f=i(o).userInfo)==null?void 0:f.avatar)!=""?(d(),u("img",{key:1,src:(m=i(o).userInfo)==null?void 0:m.avatar,alt:"avatar"},null,8,E)):c("",!0)]),s("div",R,[s("div",T,n(i(o).userInfo.nickname),1),t[3]||(t[3]=s("div",{class:"desc"},"享受音乐，享受生活",-1))])])]),s("div",U,[s("div",x,[s("div",z,n(v.value.length),1),t[4]||(t[4]=s("div",{class:"label"},"歌曲总数",-1))]),s("div",A,[s("div",F,n(I(k.value)),1),t[5]||(t[5]=s("div",{class:"label"},"总时长",-1))])]),s("div",G,[s("div",{class:"menu-item",onClick:t[0]||(t[0]=p=>a.$router.push("/mine/history"))},[t[7]||(t[7]=s("div",{class:"left"},[s("i",{class:"fas fa-history icon"}),s("span",null,"播放历史")],-1)),s("div",J,[s("span",K,n(g.value.length),1),t[6]||(t[6]=s("i",{class:"fas fa-chevron-right"},null,-1))])]),s("div",{class:"menu-item",onClick:t[1]||(t[1]=p=>a.$router.push("/mine/playlist"))},[t[9]||(t[9]=s("div",{class:"left"},[s("i",{class:"fas fa-list-ul icon"}),s("span",null,"播放列表")],-1)),s("div",O,[s("span",P,n(_.value.length),1),t[8]||(t[8]=s("i",{class:"fas fa-chevron-right"},null,-1))])]),s("div",{class:"menu-item",onClick:t[2]||(t[2]=p=>a.$router.push("/mine/star"))},[t[11]||(t[11]=s("div",{class:"left"},[s("i",{class:"fas fa-heart icon"}),s("span",null,"我的喜欢")],-1)),s("div",Q,[s("span",W,n(y.value.length),1),t[10]||(t[10]=s("i",{class:"fas fa-chevron-right"},null,-1))])]),i(o).isLoggedIn?(d(),u("div",{key:0,class:"menu-item",onClick:$},[...t[12]||(t[12]=[s("div",{class:"left"},[s("i",{class:"fas fa-sign-out-alt icon"}),s("span",null,"退出登录")],-1),s("div",{class:"right"},[s("i",{class:"fas fa-chevron-right"})],-1)])])):c("",!0)])])}}},os=L(X,[["__scopeId","data-v-9a677d3a"]]);export{os as default};
