import{_ as w,u as F,r as $,c as g,z,o as I,a as i,b as s,p as y,q as c,t as T,d as v,v as e,A as j,s as u,y as N,i as r}from"./index-BgLcfbKB.js";const R={class:"music-detail-page"},V={class:"detail-content"},q={class:"top-bar"},A={class:"cover-section"},E={class:"cover-wrapper"},O=["src"],U={key:0,class:"info-section"},G={class:"info-item"},H={class:"value"},J={class:"info-item"},K={class:"value"},L={class:"info-item"},Q={class:"value"},W={class:"info-item"},X={class:"value"},Y={class:"info-item"},Z={class:"value"},ss={class:"info-item"},as={class:"value"},ts={key:0,class:"info-item"},os={class:"value"},es={key:1,class:"actions-section"},ls={name:"MusicDetail"},ns=Object.assign(ls,{setup(is){const k=z(),h=N(),d=F(),l=T("imgPath"),t=$(null),M=g(()=>k.params.id),f=g(()=>t.value?d.isFavorite(t.value.id):!1),D=async()=>{try{const o=await j(M.value);o.data&&(t.value=o.data)}catch(o){console.error("获取歌曲详情失败:",o),u("加载失败"),h.back()}},S=o=>o?(o/(1024*1024)).toFixed(2)+" MB":"未知",x=o=>{if(!o)return"00:00";const a=Math.floor(o/60),n=Math.floor(o%60);return`${a.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},B=()=>{if(t.value){const o=d.toggleFavorite(t.value);u(o?"已添加到我的喜欢":"已取消喜欢")}},C=()=>{t.value&&(d.addToPlaylist(t.value),u("已添加到播放列表"))},P=()=>{t.value&&u("分享功能开发中")};return I(()=>{D()}),(o,a)=>{var n,p,_,m,b;return r(),i("div",R,[s("div",{class:"background",style:y({backgroundImage:`url(${(n=t.value)!=null&&n.cover?c(l)+((p=t.value)==null?void 0:p.cover):c(l)+"/storage/20251103/dxP1762151275usfDcB1.png"})`})},null,4),s("div",V,[s("div",q,[s("i",{class:"fas fa-chevron-left",onClick:a[0]||(a[0]=cs=>o.$router.back())}),a[1]||(a[1]=s("span",{class:"title"},"歌曲详情",-1)),a[2]||(a[2]=s("div",{style:{width:"40px"}},null,-1))]),s("div",A,[s("div",E,[s("img",{src:(_=t.value)!=null&&_.cover?c(l)+((m=t.value)==null?void 0:m.cover):c(l)+"/storage/20251103/dxP1762151275usfDcB1.png"},null,8,O)])]),t.value?(r(),i("div",U,[s("div",G,[a[3]||(a[3]=s("span",{class:"label"},"歌曲名称",-1)),s("span",H,e(t.value.name||"未知"),1)]),s("div",J,[a[4]||(a[4]=s("span",{class:"label"},"艺术家",-1)),s("span",K,e(t.value.artist||"未知"),1)]),s("div",L,[a[5]||(a[5]=s("span",{class:"label"},"专辑",-1)),s("span",Q,e(t.value.album||"未知"),1)]),s("div",W,[a[6]||(a[6]=s("span",{class:"label"},"时长",-1)),s("span",X,e(x(t.value.duration)),1)]),s("div",Y,[a[7]||(a[7]=s("span",{class:"label"},"格式",-1)),s("span",Z,e(((b=t.value.format)==null?void 0:b.toUpperCase())||"未知"),1)]),s("div",ss,[a[8]||(a[8]=s("span",{class:"label"},"文件大小",-1)),s("span",as,e(S(t.value.size)),1)]),t.value.play_count?(r(),i("div",ts,[a[9]||(a[9]=s("span",{class:"label"},"播放次数",-1)),s("span",os,e(t.value.play_count)+" 次",1)])):v("",!0)])):v("",!0),t.value?(r(),i("div",es,[s("div",{class:"action-btn",onClick:B},[s("i",{class:"fas fa-heart",style:y({color:f.value?"#ff4757":"#fff"})},null,4),s("span",null,e(f.value?"已收藏":"收藏"),1)]),s("div",{class:"action-btn",onClick:C},[...a[10]||(a[10]=[s("i",{class:"fas fa-step-forward"},null,-1),s("span",null,"下一首播放",-1)])]),s("div",{class:"action-btn",onClick:P},[...a[11]||(a[11]=[s("i",{class:"fas fa-share-alt"},null,-1),s("span",null,"分享",-1)])])])):v("",!0)])])}}}),rs=w(ns,[["__scopeId","data-v-414bae7e"]]);export{rs as default};
